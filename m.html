<html>
<head>
<title>Hовости</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="shortcut icon" href="https://news.yandex.ru/favicon.ico"/>
<link rel="icon" sizes="24x24" href="https://yastatic.net/iconostasis/_/lQHbCexSgizAhisugKD79mTz__Q.png" type="image/png"/>
<link rel="icon" sizes="32х32" href="https://yastatic.net/iconostasis/_/NOwNHktJskVNPZcTJcTvuXUXPzg.png" type="image/png"/>
<link rel="icon" sizes="64x64" href="https://yastatic.net/iconostasis/_/UBaaXgpU3qo2rqZuvG9gLzr7708.png" type="image/png"/>
<link rel="icon" sizes="96x96" href="https://yastatic.net/iconostasis/_/lcamcuh-DgDslnjBRGXI6VMyGLs.png" type="image/png"/>
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="/152x152.png" type="image/png"/>
<meta name="msapplication-square70x70logo" content="/70x70.png"/>
<meta name="msapplication-square150x150logo" content="/150x150.png"/>
<meta name="msapplication-wide310x150logo" content="/310x150.png"/>
<meta name="msapplication-square310x310logo" content="/310x310.png"/>
<meta name="application-name" content="Новости"/>
<meta name="msapplication-TileColor" content="#FA6800"/>
<meta name="apple-mobile-web-app-capable" content="yes" />
<style>
body { background-color: black; }
a {
    text-decoration: none;
    color: white;
}
hr {
    border: none;
    color: gray;
    background-color: gray;
    height: 1px;
}
#moex {
    color: white;
}
#moex span {
    color: gray;
}
</style>
</head>
<body>
<div id='moex'>&nbsp;</div>
<script>
var r = new XMLHttpRequest();
url = 'https://iss.moex.com/iss/engines/currency/markets/selt/securities.jsonp?securities=CETS%3AUSD000UTSTOM%2CCETS%3AEUR_RUB__TOM&lang=ru'
r.open("GET", url, true);
r.onreadystatechange = function(){        
    try {
        if(r.readyState != 4 || r.status != 200) return;
        var j = JSON.parse(r.responseText)        
        var usd = '?'
        var t = '?'
        var eur = '?'
        for(i = 0; i < j["marketdata"]["data"].length; i++){
          if(j["marketdata"]["data"][i][20].indexOf('EUR') === 0){
            eur = j["marketdata"]["data"][i][8]            
          }
          else if(j["marketdata"]["data"][i][20].indexOf('USD') === 0){
            usd = j["marketdata"]["data"][i][8]
            t = j["marketdata"]["data"][i][18]
          }
        }
        function f(x){
            return x.toFixed(2)
        }
        document.getElementById('moex').innerHTML = '<span class="cur">USD: </span>' + f(usd) + 
                                                    ' <span class="cur">EUR: </span>' + f(eur) +
                                                    ' <span class="cur">' + t + '</span>'
    }
    catch (err) {
        document.getElementById('moex').innerHTML = 'err' + err
    }
};
r.send()        
</script>
<script>
function sh(element_id){
  var x = document.getElementById(element_id);
  if(x.style.display === 'none'){
    x.style.display = 'block';
  }else{
    x.style.display = 'none';
  }
  return false
}
function _print(w,rubric,prefix){
    var data=w[rubric];
    if(!data||!data.length){return;}    
    var html='';
    for(var i=0;i<data.length;i++){
        var item=data[i];
        html+='<p><div><a href="#" onClick="return sh(\'news-1-' + prefix + i + '\')">'+item.title+'</a></div>'+
            '<div id="news-1-' + prefix + i + '" style="display: none;"><a href="'+item.url+'" target="_blank" style="color: gray;">'+item.descr+'</a></div></p>';
    }
    document.write(html);
}
</script>
<script src="https://news.yandex.ru/ru/index5.utf8.js" charset="utf-8"></script>
<script>_print(window, 'm_index', 'main');</script>
<hr>
<script src="https://news.yandex.ru/Moscow/index5.utf8.js" charset="utf-8"></script>
<script>_print(window, 'm_index', 'msk')</script>
<hr>
<script src="https://news.yandex.ru/ru/computers5.utf8.js" charset="utf-8"></script>
<script>_print(window, 'm_computers', 'm_computers')</script>   
</body>
</html>
